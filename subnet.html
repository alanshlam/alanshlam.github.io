<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IPv4 Subnet Calculator</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 600px; margin: 50px auto; padding: 20px; }
        input, button { margin: 5px; padding: 8px; }
        #results { margin-top: 20px; padding: 10px; border: 1px solid #ccc; }
        #private-ranges { margin-top: 20px; padding: 10px; border: 1px solid #ddd; background-color: #f9f9f9; }
        .error { color: red; }
        .success { color: green; }
    </style>
</head>
<body>
    <h1>IPv4 Subnet Calculator</h1>
    <label>IP Address (e.g., 192.168.1.0):</label><br>
    <input type="text" id="ip" placeholder="192.168.1.0" value="192.168.1.0">
    <br>
    <label>CIDR (e.g., /24):</label><br>
    <input type="number" id="cidr" placeholder="24" min="0" max="32" value="24">
    <br>
    <button onclick="calculate()">Calculate</button>
    <div id="results"></div>

    <div id="private-ranges">
        <h3>Private IPv4 Ranges for Reference</h3>
        <ul>
            <li>10.0.0.0 - 10.255.255.255 (10.0.0.0/8) - 16,777,216 addresses</li>
            <li>172.16.0.0 - 172.31.255.255 (172.16.0.0/12) - 1,048,576 addresses</li>
            <li>192.168.0.0 - 192.168.255.255 (192.168.0.0/16) - 65,536 addresses</li>
        </ul>
        <p><em>These are RFC 1918 private address spaces for internal networks.</em></p>
    </div>

    <script>
        function ipToInt(ip) {
            const parts = ip.split('.');
            if (parts.length !== 4) return null;
            return parts.reduce((acc, octet) => {
                const num = parseInt(octet);
                if (isNaN(num) || num < 0 || num > 255) return null;
                return (acc << 8) + num;
            }, 0) >>> 0;
        }

        function intToIp(int) {
            return [(int >>> 24) & 255, (int >>> 16) & 255, (int >>> 8) & 255, int & 255].join('.');
        }

        function validateIp(ipStr) {
            const parts = ipStr.split('.');
            if (parts.length !== 4) return false;
            return parts.every(part => {
                const num = parseInt(part);
                return !isNaN(num) && num >= 0 && num <= 255 && part === num.toString();
            });
        }

        function validateCidr(cidr) {
            return !isNaN(cidr) && cidr >= 0 && cidr <= 32 && Number.isInteger(cidr);
        }

        function calculate() {
            const ipStr = document.getElementById('ip').value.trim();
            const cidr = parseInt(document.getElementById('cidr').value);

            if (!validateIp(ipStr)) {
                document.getElementById('results').innerHTML = '<p class="error">Invalid IP address! Please enter a valid IPv4 address (e.g., 192.168.1.0).</p>';
                return;
            }

            if (!validateCidr(cidr)) {
                document.getElementById('results').innerHTML = '<p class="error">Invalid CIDR! Please enter an integer between 0 and 32.</p>';
                return;
            }

            const ipInt = ipToInt(ipStr);
            const mask = (~0) << (32 - cidr) >>> 0;
            const network = ipInt & mask;
            const broadcast = network | ~mask;
            const totalHosts = (1 << (32 - cidr));
            const usableHosts = totalHosts - 2; // Exclude network and broadcast (unless /31 or /32)

            let usableText = usableHosts;
            if (cidr >= 31) usableText = '0 (point-to-point or single host)';

            const results = `
                <h3>Results:</h3>
                <p><strong>Network Address:</strong> ${intToIp(network)}</p>
                <p><strong>Broadcast Address:</strong> ${intToIp(broadcast)}</p>
                <p><strong>Subnet Mask:</strong> ${intToIp(mask)}</p>
                <p><strong>Total Addresses:</strong> ${totalHosts}</p>
                <p><strong>Usable Hosts:</strong> ${usableText}</p>
                <p><strong>First Usable Host:</strong> ${intToIp(network + 1)}</p>
                <p><strong>Last Usable Host:</strong> ${intToIp(broadcast - 1)}</p>
            `;
            document.getElementById('results').innerHTML = `<div class="success">${results}</div>`;
        }
    </script>
</body>
</html>
